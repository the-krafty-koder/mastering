# Group By

Used to group records in a result set by a distinct column

# Aggregate functions

Aggregate functions perform a specific operation over all rows in a group.
max() - return max values within a set
min() - return mi values within a set
avg() - returns average value within a set
sum() - returns the sum of values within a set
count() - returns number of values in a set

# Counting Distinct Values

`mysql> SELECT COUNT(customer_id) num_rows, COUNT(DISTINCT customer_id) distinct_rows FROM payment;`

# Handling null values

Null values are ignored when aggregate functions are executed.

# Generating groups

Group by function is used for this.

# Grouping via expressions

Along with using columns to group data, you can build groups based on the values
generated by expressions. Consider the following query, which groups rentals by year:
mysql> SELECT extract(YEAR FROM rental_date) year,
-> COUNT(\*) how_many
-> FROM rental
-> GROUP BY extract(YEAR FROM rental_date);

SELECT fa.actor_id, f.rating
FROM film_actor fa
INNER JOIN film f
ON fa.film_id = f.film_id
GROUP BY fa.actor_id

# Grouping via Rollup

- ROLLUP is a SQL grouping extension that helps you generate subtotals and grand totals across multiple levels of a hierarchy in a single query.
- It's often used in reports or dashboards to show breakdowns and their summaries without writing multiple UNION queries.

Syntax

```
SELECT column1, column2, AGG_FUNC(column3)
FROM table
GROUP BY ROLLUP (column1, column2);
```

This produces:
Grouped by (column1, column2)
Subtotal for each column1 (with column2 = NULL)
Grand total (with both column1 and column2 = NULL)

Example

```
SELECT department, employee, SUM(sales)
FROM sales_data
GROUP BY ROLLUP (department, employee);
```

Output:

dept employee sum
HR Alice 500
HR Bob 400
HR NULL 900
IT Jane 600
IT NULL 600
NULL NULL 1500
